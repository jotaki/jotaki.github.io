---
layout: post
title:  "No environment"
date:   2013-11-09 22:18:00
categories: c software code
---

The main reason for this post is just to play with jekyll. I may eventually put
interesting posts on here. I leave to you a C program that will start programs
with an empty environment.

{% highlight c %}
/* compile with gcc -o noenv noenv.c */
#include <unistd.h>

int main(int argc, char *argv[])
{
	if(argc > 1)
		execve(argv[1], &argv[1], NULL);

	/* if we make it here, there was an error of some sort */
	return 1;
}
{% endhighlight %}

The above program starts the given command with the given arguments. It makes
use of ```execve(2)```'s envp variable by passing *NULL* to it. This is just
a simple demo application and post. If you want to actually start a program
with no environment variables set, you could use the code above; but a more
accessible method would be to use ```/usr/bin/env -i <program> [args]```. The
```env``` application is part of the [coreutils][coreutils] package.

[coreutils]: http://www.gnu.org/software/coreutils/
